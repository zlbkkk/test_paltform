# 🖥️ 服务器监控系统使用指南

## 📋 功能概述

服务器监控系统是一个仿Grafana风格的实时监控平台，支持对多台服务器进行全面的性能监控和管理。

### 🎯 核心功能

#### 📊 实时监控
- **CPU监控** - 使用率、负载平均值、核心使用情况
- **内存监控** - 使用率、已用/总量、交换分区状态
- **磁盘监控** - 使用率、剩余空间、读写I/O速率
- **网络监控** - 发送/接收流量、数据包统计

#### 🔧 服务器管理
- **服务器配置** - 添加、编辑、删除服务器
- **连接管理** - SSH密码/密钥认证支持
- **状态检测** - 实时连接状态监控
- **批量管理** - 多服务器统一管理

#### 📈 数据可视化
- **实时图表** - ECharts驱动的动态图表
- **历史趋势** - 多时间范围数据查看
- **进程监控** - Top进程CPU/内存占用
- **告警提示** - 异常状态颜色标识

## 🚀 快速开始

### 1. 启动服务

```bash
# 启动后端服务
python simple_server.py

# 启动前端服务
npm start
```

### 2. 访问监控面板

打开浏览器访问：`http://localhost:8080/#/server-monitor/dashboard`

### 3. 配置服务器

#### 添加新服务器
1. 点击页面顶部的"配置服务器"按钮
2. 填写服务器信息：
   - **服务器名称**: 便于识别的名称
   - **主机地址**: IP地址或域名
   - **SSH端口**: 默认22
   - **认证方式**: 密码或密钥认证
   - **用户名**: SSH登录用户名
   - **密码/密钥**: 根据认证方式填写

#### 测试连接
1. 在配置对话框中点击"测试连接"
2. 系统会验证SSH连接是否正常
3. 连接成功后保存配置

### 4. 查看监控数据

#### 选择服务器
- 在顶部下拉菜单中选择要监控的服务器
- 系统会自动加载该服务器的监控数据

#### 时间范围选择
- **5分钟**: 最近5分钟的详细数据
- **15分钟**: 最近15分钟数据
- **1小时**: 最近1小时数据（默认）
- **6小时**: 最近6小时数据
- **24小时**: 最近24小时数据

#### 自动刷新
- 开启自动刷新，每30秒更新一次数据
- 手动点击刷新按钮立即更新

## 📊 监控指标详解

### CPU监控
```
指标说明:
- CPU使用率: 当前CPU总体使用百分比
- 负载平均值: 系统负载情况
- 状态颜色:
  🟢 正常 (< 60%)
  🟡 警告 (60-80%)
  🔴 严重 (> 80%)
```

### 内存监控
```
指标说明:
- 内存使用率: 已用内存占总内存百分比
- 内存详情: 已用GB / 总GB
- 状态颜色:
  🟢 正常 (< 70%)
  🟡 警告 (70-85%)
  🔴 严重 (> 85%)
```

### 磁盘监控
```
指标说明:
- 磁盘使用率: 已用空间占总空间百分比
- 剩余空间: 可用磁盘空间
- I/O统计: 读写速率
- 状态颜色:
  🟢 正常 (< 80%)
  🟡 警告 (80-90%)
  🔴 严重 (> 90%)
```

### 网络监控
```
指标说明:
- 发送流量: 每秒发送的数据量
- 接收流量: 每秒接收的数据量
- 单位自动转换: B/KB/MB/GB
```

### 进程监控
```
显示信息:
- PID: 进程ID
- 进程名: 程序名称
- CPU%: 进程CPU占用率
- 内存%: 进程内存占用率
- 内存MB: 进程内存使用量
- 状态: 进程运行状态
- 启动时间: 进程创建时间
```

## 🔧 高级配置

### 认证方式配置

#### 密码认证
```
适用场景: 简单的SSH密码登录
配置项:
- 用户名: SSH登录用户
- 密码: SSH登录密码
```

#### 密钥认证
```
适用场景: 更安全的密钥对认证
配置项:
- 用户名: SSH登录用户
- 私钥路径: 私钥文件路径 (如: ~/.ssh/id_rsa)
- 私钥密码: 私钥保护密码（可选）
```

### 监控间隔设置
```
可选间隔:
- 10秒: 高频监控，适合调试
- 30秒: 标准监控（推荐）
- 1分钟: 常规监控
- 5分钟: 低频监控，节省资源
```

## 🛠️ 故障排除

### 连接问题

#### 连接超时
```
可能原因:
1. 网络不通或防火墙阻拦
2. SSH服务未启动
3. 端口配置错误

解决方案:
1. 检查网络连通性: ping 目标主机
2. 确认SSH服务状态: systemctl status ssh
3. 验证端口配置: netstat -tlnp | grep :22
```

#### 认证失败
```
可能原因:
1. 用户名或密码错误
2. 私钥文件路径错误
3. 用户权限不足

解决方案:
1. 验证登录凭据
2. 检查私钥文件权限: chmod 600 ~/.ssh/id_rsa
3. 确认用户SSH登录权限
```

### 数据异常

#### 无监控数据
```
可能原因:
1. 服务器连接断开
2. 监控服务异常
3. 权限不足

解决方案:
1. 重新测试连接
2. 检查服务器状态
3. 确认用户监控权限
```

#### 数据不准确
```
可能原因:
1. 系统时间不同步
2. 监控间隔设置过大
3. 系统负载过高

解决方案:
1. 同步系统时间: ntpdate
2. 调整监控间隔
3. 检查系统性能
```

## 🔍 API测试

使用提供的测试脚本验证功能：

```bash
# 运行API测试
python test_server_monitor_api.py
```

测试内容包括：
- ✅ 服务器列表获取
- ✅ 服务器添加/更新/删除
- ✅ 连接测试
- ✅ 监控数据获取
- ✅ 实时数据获取
- ✅ 进程列表获取

## 📱 移动端支持

监控界面采用响应式设计，支持移动设备访问：

- **平板设备**: 完整功能体验
- **手机设备**: 优化布局，核心功能可用
- **触摸操作**: 支持图表缩放和交互

## 🔮 扩展功能

### 计划中的功能
- [ ] 告警规则配置
- [ ] 邮件/短信通知
- [ ] 数据导出功能
- [ ] 自定义Dashboard
- [ ] 多用户权限管理
- [ ] 集群监控支持

### 集成建议
- **数据库**: 可集成InfluxDB存储历史数据
- **告警**: 可集成Prometheus AlertManager
- **通知**: 可集成钉钉、企业微信等
- **日志**: 可集成ELK Stack日志分析

## 📞 技术支持

如遇问题，请：
1. 查看控制台错误信息
2. 检查网络连接状态
3. 验证服务器配置
4. 参考故障排除指南

---

**🎉 享受专业的服务器监控体验！**
