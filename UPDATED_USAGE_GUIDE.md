# 🚀 服务器监控系统 - 真实连接使用指南

## 📋 重要更新

系统已更新为**仅支持真实服务器连接**，不再提供演示数据。这确保了监控数据的真实性和准确性。

## 🔧 快速开始

### 1. 安装依赖

```bash
# 安装SSH连接依赖
python install_dependencies.py

# 或手动安装
pip install paramiko psutil cryptography
```

### 2. 启动服务

```bash
# 启动后端服务
python simple_server.py

# 启动前端服务
npm start
```

### 3. 访问监控界面

打开浏览器访问：`http://localhost:8080/#/server-monitor/dashboard`

## 📊 首次使用流程

### 步骤1: 配置服务器

1. **点击"配置第一台服务器"按钮**
2. **填写服务器信息**：
   ```
   服务器名称: 我的服务器
   主机地址: 192.168.1.100
   SSH端口: 22
   认证方式: 密码认证
   用户名: root
   密码: your_password
   ```

3. **测试连接**：
   - 点击"测试连接"按钮
   - 等待连接结果
   - 确保显示"连接成功"

4. **保存配置**：
   - 连接成功后点击"保存"
   - 服务器将添加到列表中

### 步骤2: 选择服务器

1. **在顶部下拉菜单中选择配置的服务器**
2. **系统会自动测试连接并获取数据**
3. **查看监控指标和图表**

### 步骤3: 监控数据

成功连接后，你将看到：
- ✅ **实时指标卡片** - CPU、内存、磁盘、网络
- ✅ **趋势图表** - 历史数据可视化
- ✅ **进程监控** - Top进程列表
- ✅ **自动刷新** - 30秒更新一次

## 🔍 界面状态说明

### 🟢 正常状态
- 服务器连接成功
- 显示真实监控数据
- 图表正常更新
- 进程列表可见

### 🟡 无服务器状态
- 显示欢迎界面
- 提供配置步骤指导
- 引导用户添加服务器

### 🔴 连接失败状态
- 显示连接错误信息
- 提供故障排除建议
- 提供重新连接选项

## 🛠️ 故障排除

### 连接问题

#### 1. "连接超时"
```
原因: 网络不通或防火墙阻拦
解决:
- ping 目标服务器确认网络
- 检查防火墙设置
- 确认SSH端口开放
```

#### 2. "认证失败"
```
原因: 用户名或密码错误
解决:
- 验证登录凭据
- 确认用户SSH权限
- 检查密钥文件路径
```

#### 3. "无法获取监控数据"
```
原因: 连接成功但命令执行失败
解决:
- 确认用户有执行权限
- 检查系统命令兼容性
- 查看服务器日志
```

### 数据异常

#### 1. 监控数据为空
```
检查项:
- 服务器连接状态
- 用户权限设置
- 系统命令可用性
```

#### 2. 进程列表为空
```
检查项:
- ps命令是否可用
- 用户查看进程权限
- 系统负载情况
```

## 🔒 安全配置建议

### 1. 认证方式
```
推荐: SSH密钥认证
- 生成密钥对: ssh-keygen -t rsa -b 4096
- 上传公钥: ssh-copy-id user@server
- 使用私钥路径配置
```

### 2. 用户权限
```
建议: 创建专用监控用户
- 最小权限原则
- 只授予必要的查看权限
- 定期更换认证凭据
```

### 3. 网络安全
```
措施:
- 限制SSH访问来源
- 使用非标准SSH端口
- 启用防火墙保护
```

## 📈 监控指标详解

### CPU监控
- **获取方式**: `top -bn1` 命令
- **指标**: 使用率百分比、负载平均值
- **状态**: 🟢<60% 🟡60-80% 🔴>80%

### 内存监控
- **获取方式**: `free` 命令
- **指标**: 使用率、已用/总量
- **状态**: 🟢<70% 🟡70-85% 🔴>85%

### 磁盘监控
- **获取方式**: `df -h` 命令
- **指标**: 使用率、剩余空间
- **状态**: 🟢<80% 🟡80-90% 🔴>90%

### 网络监控
- **获取方式**: `/proc/net/dev` 文件
- **指标**: 发送/接收流量
- **单位**: 自动转换 B/KB/MB/GB

### 进程监控
- **获取方式**: `ps aux` 命令
- **排序**: 按CPU使用率降序
- **显示**: 前10个高CPU进程

## 🧪 测试验证

### 使用测试脚本
```bash
# 交互式测试
python test_server_monitor_api.py --interactive

# 完整测试
python test_server_monitor_api.py
```

### 测试内容
- ✅ 服务器配置管理
- ✅ SSH连接测试
- ✅ 监控数据获取
- ✅ 实时数据更新
- ✅ 进程列表获取

## 💡 使用技巧

### 1. 多服务器管理
- 添加多台服务器配置
- 快速切换监控目标
- 统一管理界面

### 2. 时间范围选择
- 5分钟: 详细实时数据
- 1小时: 标准监控（推荐）
- 24小时: 长期趋势分析

### 3. 自动刷新
- 开启自动刷新功能
- 30秒更新间隔
- 实时监控状态

### 4. 连接优化
- 使用密钥认证提高安全性
- 配置合适的监控间隔
- 定期检查连接状态

## 🚀 扩展功能

### 计划功能
- [ ] 告警规则配置
- [ ] 历史数据存储
- [ ] 邮件通知功能
- [ ] 自定义Dashboard
- [ ] 集群监控支持

### 集成建议
- **数据库**: InfluxDB存储历史数据
- **告警**: Prometheus AlertManager
- **通知**: 钉钉、企业微信集成
- **日志**: ELK Stack日志分析

## 📞 技术支持

### 常见问题
1. **依赖库安装失败**: 使用国内镜像源
2. **SSH连接超时**: 检查网络和防火墙
3. **权限不足**: 确认用户权限设置
4. **数据不准确**: 检查系统兼容性

### 获取帮助
- 查看控制台错误信息
- 运行测试脚本诊断
- 检查服务器日志
- 参考故障排除指南

---

**🎯 现在开始监控你的真实服务器吧！**
