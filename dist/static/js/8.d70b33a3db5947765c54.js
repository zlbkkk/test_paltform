webpackJsonp([8],{RGQ7:function(t,e){},g0fI:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("gRE1"),r=s.n(a),i=s("Xxa5"),n=s.n(i),o=s("exGp"),c=s.n(o),l=s("XLwt"),u=s("Dd8w"),m=s.n(u),h=s("vLgD");function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(h.a)({url:t?"/api/servers/"+t+"/test":"/api/servers/test",method:"post",data:e,timeout:45e3})}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1h";return Object(h.a)({url:"/api/servers/"+t+"/metrics",method:"get",params:{timeRange:e}})}var d={name:"ServerConfigDialog",props:{visible:{type:Boolean,default:!1},server:{type:Object,default:null}},data:function(){var t=this;return{dialogVisible:!1,saving:!1,deleting:!1,testing:!1,testResult:null,formData:{id:null,name:"",host:"",port:22,auth_type:"password",username:"root",password:"",private_key_path:"",key_password:"",monitor_interval:30,description:"",enabled:!0},formRules:{name:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡å™¨åç§°",trigger:"blur"},{min:2,max:50,message:"é•¿åº¦åœ¨ 2 åˆ° 50 ä¸ªå­—ç¬¦",trigger:"blur"}],host:[{required:!0,message:"è¯·è¾“å…¥ä¸»æœºåœ°å€",trigger:"blur"},{pattern:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$|^[a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?)*$/,message:"è¯·è¾“å…¥æœ‰æ•ˆçš„IPåœ°å€æˆ–åŸŸå",trigger:"blur"}],port:[{required:!0,message:"è¯·è¾“å…¥ç«¯å£å·",trigger:"blur"},{type:"number",min:1,max:65535,message:"ç«¯å£å·èŒƒå›´ 1-65535",trigger:"blur"}],username:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å",trigger:"blur"}],password:[{validator:function(e,s,a){"password"!==t.formData.auth_type||s?a():a(new Error("è¯·è¾“å…¥å¯†ç "))},trigger:"blur"}],private_key_path:[{validator:function(e,s,a){"key"!==t.formData.auth_type||s?a():a(new Error("è¯·è¾“å…¥ç§é’¥æ–‡ä»¶è·¯å¾„"))},trigger:"blur"}]}}},computed:{isEdit:function(){return this.server&&this.server.id}},watch:{visible:function(t){this.dialogVisible=t,t&&(this.initForm(),this.testResult=null)},dialogVisible:function(t){this.$emit("update:visible",t)}},methods:{initForm:function(){var t=this;this.server?this.formData=m()({},this.formData,this.server):this.formData={id:null,name:"",host:"",port:22,auth_type:"password",username:"root",password:"",private_key_path:"",key_password:"",monitor_interval:30,description:"",enabled:!0},this.$nextTick(function(){t.$refs.serverForm&&t.$refs.serverForm.clearValidate()})},testConnection:function(){var t=this;return c()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$refs.serverForm.validateField(["name","host","port","username"]);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),t.$message.warning("è¯·å…ˆå¡«å†™å®Œæ•´çš„è¿æ¥ä¿¡æ¯"),e.abrupt("return");case 9:return t.testing=!0,t.testResult=null,e.prev=11,e.next=14,v(null,t.formData);case 14:s=e.sent,t.testResult={success:s.success,message:s.success?"è¿æ¥æˆåŠŸï¼":s.error},s.success?t.$message.success("æœåŠ¡å™¨è¿æ¥æµ‹è¯•æˆåŠŸ"):t.$message.error("è¿æ¥å¤±è´¥: "+s.error),e.next=23;break;case 19:e.prev=19,e.t1=e.catch(11),t.testResult={success:!1,message:"è¿æ¥æµ‹è¯•å¤±è´¥: "+e.t1.message},t.$message.error("è¿æ¥æµ‹è¯•å¤±è´¥: "+e.t1.message);case 23:return e.prev=23,t.testing=!1,e.finish(23);case 26:case"end":return e.stop()}},e,t,[[0,5],[11,19,23,26]])}))()},handleSave:function(){var t=this;return c()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$refs.serverForm.validate();case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:return t.saving=!0,e.prev=9,e.next=12,a=t.formData,Object(h.a)({url:a.id?"/api/servers/"+a.id:"/api/servers",method:a.id?"put":"post",data:a});case 12:(s=e.sent).success?(t.$message.success(t.isEdit?"æœåŠ¡å™¨æ›´æ–°æˆåŠŸ":"æœåŠ¡å™¨æ·»åŠ æˆåŠŸ"),t.$emit("save",s.data)):t.$message.error(s.error||"ä¿å­˜å¤±è´¥"),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(9),t.$message.error("ä¿å­˜å¤±è´¥: "+e.t1.message);case 19:return e.prev=19,t.saving=!1,e.finish(19);case 22:case"end":return e.stop()}var a},e,t,[[0,5],[9,16,19,22]])}))()},handleDelete:function(){var t=this;return c()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isEdit){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,t.$confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæœåŠ¡å™¨é…ç½®å—ï¼Ÿ","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"});case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return");case 10:return t.deleting=!0,e.prev=11,e.next=14,a=t.formData.id,Object(h.a)({url:"/api/servers/"+a,method:"delete"});case 14:(s=e.sent).success?(t.$message.success("æœåŠ¡å™¨åˆ é™¤æˆåŠŸ"),t.$emit("delete",t.formData.id)):t.$message.error(s.error||"åˆ é™¤å¤±è´¥"),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(11),t.$message.error("åˆ é™¤å¤±è´¥: "+e.t1.message);case 21:return e.prev=21,t.deleting=!1,e.finish(21);case 24:case"end":return e.stop()}var a},e,t,[[2,7],[11,18,21,24]])}))()},handleClose:function(){this.dialogVisible=!1}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{staticClass:"server-config-dialog",attrs:{title:t.isEdit?"ç¼–è¾‘æœåŠ¡å™¨":"æ·»åŠ æœåŠ¡å™¨",visible:t.dialogVisible,width:"600px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-form",{ref:"serverForm",attrs:{model:t.formData,rules:t.formRules,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"æœåŠ¡å™¨åç§°",prop:"name"}},[s("el-input",{attrs:{placeholder:"è¯·è¾“å…¥æœåŠ¡å™¨åç§°",maxlength:"50"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"ä¸»æœºåœ°å€",prop:"host"}},[s("el-input",{attrs:{placeholder:"IPåœ°å€æˆ–åŸŸåï¼Œå¦‚: 192.168.1.100"},model:{value:t.formData.host,callback:function(e){t.$set(t.formData,"host",e)},expression:"formData.host"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"SSHç«¯å£",prop:"port"}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:65535,placeholder:"SSHç«¯å£å·"},model:{value:t.formData.port,callback:function(e){t.$set(t.formData,"port",e)},expression:"formData.port"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"è®¤è¯æ–¹å¼",prop:"auth_type"}},[s("el-radio-group",{model:{value:t.formData.auth_type,callback:function(e){t.$set(t.formData,"auth_type",e)},expression:"formData.auth_type"}},[s("el-radio",{attrs:{label:"password"}},[t._v("å¯†ç è®¤è¯")]),t._v(" "),s("el-radio",{attrs:{label:"key"}},[t._v("å¯†é’¥è®¤è¯")])],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"ç”¨æˆ·å",prop:"username"}},[s("el-input",{attrs:{placeholder:"SSHç™»å½•ç”¨æˆ·å"},model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}})],1),t._v(" "),"password"===t.formData.auth_type?s("el-form-item",{attrs:{label:"å¯†ç ",prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"SSHç™»å½•å¯†ç ","show-password":""},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1):t._e(),t._v(" "),"key"===t.formData.auth_type?s("el-form-item",{attrs:{label:"ç§é’¥æ–‡ä»¶",prop:"private_key_path"}},[s("el-input",{attrs:{placeholder:"ç§é’¥æ–‡ä»¶è·¯å¾„ï¼Œå¦‚: ~/.ssh/id_rsa"},model:{value:t.formData.private_key_path,callback:function(e){t.$set(t.formData,"private_key_path",e)},expression:"formData.private_key_path"}})],1):t._e(),t._v(" "),"key"===t.formData.auth_type?s("el-form-item",{attrs:{label:"ç§é’¥å¯†ç ",prop:"key_password"}},[s("el-input",{attrs:{type:"password",placeholder:"ç§é’¥å¯†ç ï¼ˆå¦‚æœæœ‰ï¼‰","show-password":""},model:{value:t.formData.key_password,callback:function(e){t.$set(t.formData,"key_password",e)},expression:"formData.key_password"}})],1):t._e(),t._v(" "),s("el-form-item",{attrs:{label:"ç›‘æ§é—´éš”"}},[s("el-select",{staticStyle:{width:"100%"},model:{value:t.formData.monitor_interval,callback:function(e){t.$set(t.formData,"monitor_interval",e)},expression:"formData.monitor_interval"}},[s("el-option",{attrs:{label:"10ç§’",value:10}}),t._v(" "),s("el-option",{attrs:{label:"30ç§’",value:30}}),t._v(" "),s("el-option",{attrs:{label:"1åˆ†é’Ÿ",value:60}}),t._v(" "),s("el-option",{attrs:{label:"5åˆ†é’Ÿ",value:300}})],1),t._v(" "),s("div",{staticClass:"form-tip"},[t._v("æ•°æ®é‡‡é›†é—´éš”æ—¶é—´")])],1),t._v(" "),s("el-form-item",{attrs:{label:"æè¿°"}},[s("el-input",{attrs:{type:"textarea",rows:3,placeholder:"æœåŠ¡å™¨æè¿°ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰",maxlength:"200"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"å¯ç”¨ç›‘æ§"}},[s("el-switch",{model:{value:t.formData.enabled,callback:function(e){t.$set(t.formData,"enabled",e)},expression:"formData.enabled"}}),t._v(" "),s("div",{staticClass:"form-tip"},[t._v("æ˜¯å¦å¯ç”¨å¯¹æ­¤æœåŠ¡å™¨çš„ç›‘æ§")])],1)],1),t._v(" "),s("div",{staticClass:"test-connection"},[s("el-button",{attrs:{loading:t.testing,icon:"el-icon-connection"},on:{click:t.testConnection}},[t._v("\n      æµ‹è¯•è¿æ¥\n    ")]),t._v(" "),t.testResult?s("span",{class:t.testResult.success?"test-success":"test-error"},[t._v("\n      "+t._s(t.testResult.message)+"\n    ")]):t._e()],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.handleClose}},[t._v("å–æ¶ˆ")]),t._v(" "),t.isEdit?s("el-button",{attrs:{type:"danger",loading:t.deleting},on:{click:t.handleDelete}},[t._v("\n      åˆ é™¤\n    ")]):t._e(),t._v(" "),s("el-button",{attrs:{type:"primary",loading:t.saving},on:{click:t.handleSave}},[t._v("\n      ä¿å­˜\n    ")])],1)],1)},staticRenderFns:[]};var _={name:"ServerMonitorDashboard",components:{ServerConfigDialog:s("VU/8")(d,f,!1,function(t){s("RGQ7")},"data-v-20a0d847",null).exports},data:function(){return{servers:[],selectedServer:null,currentServerInfo:{},connectionStatus:"disconnected",timeRange:"1h",autoRefresh:!0,loading:!1,showServerConfig:!1,editingServer:null,currentMetrics:{cpu:0,load_avg:0,memory_percent:0,memory_used:0,memory_total:0,disk_percent:0,disk_free:0,network_sent:0,network_recv:0},historicalData:{timestamps:[],cpu:[],memory:[],disk_read:[],disk_write:[],network_sent:[],network_recv:[]},topProcesses:[],charts:{cpu:null,memory:null,disk:null,network:null},refreshTimer:null}},mounted:function(){var t=this;this.loadServers(),this.$nextTick(function(){setTimeout(function(){console.log("ğŸš€ å¼€å§‹åˆå§‹åŒ–å›¾è¡¨..."),t.initCharts(),setTimeout(function(){t.historicalData&&t.historicalData.timestamps&&t.historicalData.timestamps.length>0&&(console.log("ğŸ”„ å»¶è¿Ÿæ›´æ–°å›¾è¡¨æ•°æ®"),t.updateCharts())},500)},200)})},beforeDestroy:function(){this.stopAutoRefresh(),this.destroyCharts()},methods:{loadServers:function(){var t=this;return c()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(h.a)({url:"/api/servers",method:"get"});case 3:s=e.sent,t.servers=s.data||[],0===t.servers.length&&t.$message.info("æš‚æ— é…ç½®çš„æœåŠ¡å™¨ï¼Œè¯·å…ˆæ·»åŠ æœåŠ¡å™¨é…ç½®"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.$message.error("åŠ è½½æœåŠ¡å™¨åˆ—è¡¨å¤±è´¥: "+e.t0.message);case 11:case"end":return e.stop()}},e,t,[[0,8]])}))()},onServerChange:function(){var t=this;return c()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.selectedServer){e.next=2;break}return e.abrupt("return");case 2:return t.currentServerInfo=t.servers.find(function(e){return e.id===t.selectedServer})||{},t.connectionStatus="connecting",e.next=6,t.testConnection();case 6:if("connected"!==t.connectionStatus){e.next=15;break}if(t.charts.cpu&&t.charts.memory&&t.charts.disk&&t.charts.network){e.next=12;break}return console.log("ğŸ”„ é‡æ–°åˆå§‹åŒ–å›¾è¡¨..."),t.initCharts(),e.next=12,t.$nextTick();case 12:return e.next=14,t.loadServerData();case 14:t.autoRefresh&&t.startAutoRefresh();case 15:case"end":return e.stop()}},e,t)}))()},testConnection:function(){var t=this;return c()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(t.selectedServer);case 3:s=e.sent,t.connectionStatus=s.success?"connected":"disconnected",s.success||t.$message.error("æœåŠ¡å™¨è¿æ¥å¤±è´¥: "+s.error),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t.connectionStatus="disconnected",t.$message.error("è¿æ¥æµ‹è¯•å¤±è´¥: "+e.t0.message);case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()},loadServerData:function(){var t=this;return c()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.selectedServer){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,e.prev=3,e.next=6,p(t.selectedServer,t.timeRange);case 6:(s=e.sent).success?(t.currentMetrics=s.data.current,t.historicalData=s.data.historical,t.topProcesses=s.data.processes||[],console.log("ğŸ“Š è·å–åˆ°å†å²æ•°æ®:",{timeRange:t.timeRange,timestamps:t.historicalData.timestamps?t.historicalData.timestamps.length:0,cpuData:t.historicalData.cpu?t.historicalData.cpu.length:0,firstTime:t.historicalData.timestamps?t.historicalData.timestamps[0]:null,lastTime:t.historicalData.timestamps?t.historicalData.timestamps[t.historicalData.timestamps.length-1]:null}),t.updateCharts(),"connected"!==t.connectionStatus&&(t.connectionStatus="connected")):(t.connectionStatus="disconnected",t.$message.error("è·å–æœåŠ¡å™¨æ•°æ®å¤±è´¥: "+s.error),s.suggestion&&t.$message.info(s.suggestion),t.currentMetrics={cpu:0,load_avg:0,memory_percent:0,memory_used:0,memory_total:0,disk_percent:0,disk_free:0,network_sent:0,network_recv:0},t.historicalData={timestamps:[],cpu:[],memory:[],disk_read:[],disk_write:[],network_sent:[],network_recv:[]},t.topProcesses=[]),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),t.connectionStatus="disconnected",t.$message.error("è·å–æœåŠ¡å™¨æ•°æ®å¤±è´¥: "+e.t0.message);case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,t,[[3,10,14,17]])}))()},refreshData:function(){this.loadServerData()},onTimeRangeChange:function(){console.log("ğŸ• æ—¶é—´èŒƒå›´å˜åŒ–:",this.timeRange),this.loadServerData()},toggleAutoRefresh:function(){this.autoRefresh?this.startAutoRefresh():this.stopAutoRefresh()},startAutoRefresh:function(){var t=this;this.stopAutoRefresh(),this.refreshTimer=setInterval(function(){t.loadServerData()},3e4)},stopAutoRefresh:function(){this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=null)},refreshProcesses:function(){this.loadServerData()},editCurrentServer:function(){this.editingServer=this.currentServerInfo,this.showServerConfig=!0},onServerSaved:function(t){this.loadServers(),this.showServerConfig=!1,t.id===this.selectedServer&&this.onServerChange()},onServerDeleted:function(t){this.loadServers(),this.showServerConfig=!1,t===this.selectedServer&&(this.selectedServer=null,this.connectionStatus="disconnected",this.stopAutoRefresh())},getCpuStatusClass:function(t){return t>=80?"status-critical":t>=60?"status-warning":"status-normal"},getMemoryStatusClass:function(t){return t>=85?"status-critical":t>=70?"status-warning":"status-normal"},getDiskStatusClass:function(t){return t>=90?"status-critical":t>=80?"status-warning":"status-normal"},formatBytes:function(t){if(0===t)return"0 B";var e=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,e)).toFixed(1))+" "+["B","KB","MB","GB"][e]},initCharts:function(){var t=this;this.$nextTick(function(){console.log("ğŸ¨ åˆå§‹åŒ–å›¾è¡¨..."),t.$refs.cpuChart?(t.charts.cpu=l.a(t.$refs.cpuChart,"dark"),console.log("âœ… CPUå›¾è¡¨åˆå§‹åŒ–æˆåŠŸ")):console.log("âŒ CPUå›¾è¡¨DOMå…ƒç´ æœªæ‰¾åˆ°"),t.$refs.memoryChart?(t.charts.memory=l.a(t.$refs.memoryChart,"dark"),console.log("âœ… å†…å­˜å›¾è¡¨åˆå§‹åŒ–æˆåŠŸ")):console.log("âŒ å†…å­˜å›¾è¡¨DOMå…ƒç´ æœªæ‰¾åˆ°"),t.$refs.diskChart?(t.charts.disk=l.a(t.$refs.diskChart,"dark"),console.log("âœ… ç£ç›˜å›¾è¡¨åˆå§‹åŒ–æˆåŠŸ")):console.log("âŒ ç£ç›˜å›¾è¡¨DOMå…ƒç´ æœªæ‰¾åˆ°"),t.$refs.networkChart?(t.charts.network=l.a(t.$refs.networkChart,"dark"),console.log("âœ… ç½‘ç»œå›¾è¡¨åˆå§‹åŒ–æˆåŠŸ")):console.log("âŒ ç½‘ç»œå›¾è¡¨DOMå…ƒç´ æœªæ‰¾åˆ°"),t.historicalData&&t.historicalData.timestamps&&t.historicalData.timestamps.length>0&&(console.log("ğŸ”„ å›¾è¡¨åˆå§‹åŒ–åç«‹å³æ›´æ–°æ•°æ®"),t.updateCharts())})},updateCharts:function(){console.log("ğŸ“ˆ æ›´æ–°å›¾è¡¨ï¼Œæ—¶é—´èŒƒå›´:",this.timeRange),console.log("ğŸ“ˆ å†å²æ•°æ®:",this.historicalData),this.updateCpuChart(),this.updateMemoryChart(),this.updateDiskChart(),this.updateNetworkChart()},updateCpuChart:function(){if(this.charts.cpu){console.log("ğŸ“Š æ›´æ–°CPUå›¾è¡¨ï¼Œæ•°æ®:",{timestamps:this.historicalData.timestamps?this.historicalData.timestamps.length:0,cpu:this.historicalData.cpu?this.historicalData.cpu.length:0,timestampsData:this.historicalData.timestamps,cpuData:this.historicalData.cpu});var t={tooltip:{trigger:"axis",formatter:"{b}<br/>CPUä½¿ç”¨ç‡: {c}%"},xAxis:{type:"category",data:this.historicalData.timestamps||[]},yAxis:{type:"value",min:0,max:100,axisLabel:{formatter:"{value}%"}},series:[{data:this.historicalData.cpu||[],type:"line",smooth:!0,itemStyle:{color:"#52c41a"},areaStyle:{opacity:.3}}]};this.charts.cpu.setOption(t),console.log("âœ… CPUå›¾è¡¨æ›´æ–°å®Œæˆ")}else console.log("âŒ CPUå›¾è¡¨æœªåˆå§‹åŒ–")},updateMemoryChart:function(){if(this.charts.memory){console.log("ğŸ“Š æ›´æ–°å†…å­˜å›¾è¡¨ï¼Œæ•°æ®:",{timestamps:this.historicalData.timestamps?this.historicalData.timestamps.length:0,memory:this.historicalData.memory?this.historicalData.memory.length:0});var t={tooltip:{trigger:"axis",formatter:"{b}<br/>å†…å­˜ä½¿ç”¨ç‡: {c}%"},xAxis:{type:"category",data:this.historicalData.timestamps},yAxis:{type:"value",min:0,max:100,axisLabel:{formatter:"{value}%"}},series:[{data:this.historicalData.memory,type:"line",smooth:!0,itemStyle:{color:"#1890ff"},areaStyle:{opacity:.3}}]};this.charts.memory.setOption(t)}else console.log("âŒ å†…å­˜å›¾è¡¨æœªåˆå§‹åŒ–")},updateDiskChart:function(){var t=this;if(this.charts.disk){console.log("ğŸ“Š æ›´æ–°ç£ç›˜å›¾è¡¨ï¼Œæ•°æ®:",{timestamps:this.historicalData.timestamps?this.historicalData.timestamps.length:0,diskRead:this.historicalData.diskRead?this.historicalData.diskRead.length:0,diskWrite:this.historicalData.diskWrite?this.historicalData.diskWrite.length:0});var e={tooltip:{trigger:"axis"},legend:{data:["è¯»å–","å†™å…¥"]},grid:{left:"80px",right:"20px",top:"60px",bottom:"60px"},xAxis:{type:"category",data:this.historicalData.timestamps},yAxis:{type:"value",axisLabel:{formatter:function(e){return t.formatBytes(e)+"/s"}}},series:[{name:"è¯»å–",data:this.historicalData.diskRead||this.historicalData.disk_read||[],type:"line",smooth:!0,itemStyle:{color:"#faad14"}},{name:"å†™å…¥",data:this.historicalData.diskWrite||this.historicalData.disk_write||[],type:"line",smooth:!0,itemStyle:{color:"#f5222d"}}]};this.charts.disk.setOption(e)}else console.log("âŒ ç£ç›˜å›¾è¡¨æœªåˆå§‹åŒ–")},updateNetworkChart:function(){var t=this;if(this.charts.network){console.log("ğŸ“Š æ›´æ–°ç½‘ç»œå›¾è¡¨ï¼Œæ•°æ®:",{timestamps:this.historicalData.timestamps?this.historicalData.timestamps.length:0,networkIn:this.historicalData.networkIn?this.historicalData.networkIn.length:0,networkOut:this.historicalData.networkOut?this.historicalData.networkOut.length:0});var e={tooltip:{trigger:"axis"},legend:{data:["å‘é€","æ¥æ”¶"]},grid:{left:"80px",right:"20px",top:"60px",bottom:"60px"},xAxis:{type:"category",data:this.historicalData.timestamps},yAxis:{type:"value",axisLabel:{formatter:function(e){return t.formatBytes(e)+"/s"}}},series:[{name:"å‘é€",data:this.historicalData.networkOut||this.historicalData.network_sent||[],type:"line",smooth:!0,itemStyle:{color:"#722ed1"}},{name:"æ¥æ”¶",data:this.historicalData.networkIn||this.historicalData.network_recv||[],type:"line",smooth:!0,itemStyle:{color:"#13c2c2"}}]};this.charts.network.setOption(e)}else console.log("âŒ ç½‘ç»œå›¾è¡¨æœªåˆå§‹åŒ–")},toggleChartFullscreen:function(t){this.$message.info("å…¨å±åŠŸèƒ½å¼€å‘ä¸­...")},destroyCharts:function(){r()(this.charts).forEach(function(t){t&&t.dispose()})},forceResizeCharts:function(){var t=this;console.log("ğŸ”„ å¼ºåˆ¶é‡æ–°æ¸²æŸ“å›¾è¡¨..."),this.$nextTick(function(){r()(t.charts).forEach(function(t){t&&t.resize()})})},reinitCharts:function(){var t=this;console.log("ğŸ”„ é‡æ–°åˆå§‹åŒ–å›¾è¡¨..."),this.destroyCharts(),this.charts={cpu:null,memory:null,disk:null,network:null},setTimeout(function(){t.initCharts()},100)},generateTestData:function(){console.log("ğŸ² ç”Ÿæˆæµ‹è¯•æ•°æ®...");var t=new Date,e=[],s=[],a=[],r=[],i=[],n=[],o=[],c=30,l=1;switch(this.timeRange){case"5m":c=30,l=.2;break;case"15m":c=30,l=.5;break;case"1h":c=30,l=2;break;case"6h":c=30,l=12;break;case"24h":c=30,l=48}for(var u=0;u<c;u++){var m=new Date(t.getTime()-(c-u)*l*60*1e3);e.push(m.toLocaleTimeString()),s.push(Math.max(0,Math.min(100,30+20*Math.sin(.3*u)+10*Math.random()))),a.push(Math.max(0,Math.min(100,40+15*Math.sin(.2*u)+8*Math.random()))),r.push(Math.max(0,50+30*Math.sin(.4*u)+20*Math.random())),i.push(Math.max(0,30+20*Math.sin(.5*u)+15*Math.random())),n.push(Math.max(0,100+50*Math.sin(.3*u)+30*Math.random())),o.push(Math.max(0,80+40*Math.sin(.4*u)+25*Math.random()))}this.historicalData={timestamps:e,cpu:s,memory:a,diskRead:r,diskWrite:i,networkIn:n,networkOut:o},console.log("âœ… æµ‹è¯•æ•°æ®ç”Ÿæˆå®Œæˆ:",this.historicalData),this.updateCharts(),this.$message.success("æµ‹è¯•æ•°æ®ç”ŸæˆæˆåŠŸï¼")}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"server-monitor"},[s("div",{staticClass:"monitor-header"},[s("div",{staticClass:"server-selector"},[s("el-select",{attrs:{placeholder:"é€‰æ‹©æœåŠ¡å™¨"},on:{change:t.onServerChange},model:{value:t.selectedServer,callback:function(e){t.selectedServer=e},expression:"selectedServer"}},t._l(t.servers,function(t){return s("el-option",{key:t.id,attrs:{label:t.name+" ("+t.host+")",value:t.id}})}),1),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showServerConfig=!0}}},[t._v("é…ç½®æœåŠ¡å™¨")])],1),t._v(" "),s("div",{staticClass:"time-controls"},[s("el-select",{on:{change:t.onTimeRangeChange},model:{value:t.timeRange,callback:function(e){t.timeRange=e},expression:"timeRange"}},[s("el-option",{attrs:{label:"æœ€è¿‘5åˆ†é’Ÿ",value:"5m"}}),t._v(" "),s("el-option",{attrs:{label:"æœ€è¿‘15åˆ†é’Ÿ",value:"15m"}}),t._v(" "),s("el-option",{attrs:{label:"æœ€è¿‘1å°æ—¶",value:"1h"}}),t._v(" "),s("el-option",{attrs:{label:"æœ€è¿‘6å°æ—¶",value:"6h"}}),t._v(" "),s("el-option",{attrs:{label:"æœ€è¿‘24å°æ—¶",value:"24h"}})],1),t._v(" "),s("el-button",{attrs:{loading:t.loading},on:{click:t.refreshData}},[s("i",{staticClass:"el-icon-refresh"}),t._v(" åˆ·æ–°\n      ")]),t._v(" "),s("el-button",{attrs:{type:"warning",size:"small"},on:{click:t.reinitCharts}},[s("i",{staticClass:"el-icon-refresh-right"}),t._v(" é‡æ–°åˆå§‹åŒ–å›¾è¡¨\n      ")]),t._v(" "),s("el-button",{attrs:{type:"success",size:"small"},on:{click:t.generateTestData}},[s("i",{staticClass:"el-icon-data-line"}),t._v(" ç”Ÿæˆæµ‹è¯•æ•°æ®\n      ")]),t._v(" "),s("el-switch",{attrs:{"active-text":"è‡ªåŠ¨åˆ·æ–°"},on:{change:t.toggleAutoRefresh},model:{value:t.autoRefresh,callback:function(e){t.autoRefresh=e},expression:"autoRefresh"}})],1)]),t._v(" "),t.selectedServer?s("div",{staticClass:"server-overview"},[s("div",{staticClass:"server-info"},[s("h2",[t._v(t._s(t.currentServerInfo.name))]),t._v(" "),s("div",{staticClass:"server-details"},[s("span",[t._v(t._s(t.currentServerInfo.host)+":"+t._s(t.currentServerInfo.port))]),t._v(" "),s("el-tag",{attrs:{type:"connected"===t.connectionStatus?"success":"danger",size:"small"}},[t._v("\n          "+t._s("connected"===t.connectionStatus?"å·²è¿æ¥":"è¿æ¥å¤±è´¥")+"\n        ")])],1)])]):t._e(),t._v(" "),t.selectedServer&&"connected"===t.connectionStatus?s("div",{staticClass:"metrics-cards"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"metric-card cpu"},[s("div",{staticClass:"metric-icon"},[s("i",{staticClass:"el-icon-cpu"})]),t._v(" "),s("div",{staticClass:"metric-content"},[s("div",{staticClass:"metric-value",class:t.getCpuStatusClass(t.currentMetrics.cpu)},[t._v("\n              "+t._s(t.currentMetrics.cpu)+"%\n            ")]),t._v(" "),s("div",{staticClass:"metric-label"},[t._v("CPUä½¿ç”¨ç‡")]),t._v(" "),s("div",{staticClass:"metric-detail"},[t._v("\n              è´Ÿè½½: "+t._s(t.currentMetrics.load_avg)+"\n            ")])])])]),t._v(" "),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"metric-card memory"},[s("div",{staticClass:"metric-icon"},[s("i",{staticClass:"el-icon-memory-card"})]),t._v(" "),s("div",{staticClass:"metric-content"},[s("div",{staticClass:"metric-value",class:t.getMemoryStatusClass(t.currentMetrics.memory_percent)},[t._v("\n              "+t._s(t.currentMetrics.memory_percent)+"%\n            ")]),t._v(" "),s("div",{staticClass:"metric-label"},[t._v("å†…å­˜ä½¿ç”¨ç‡")]),t._v(" "),s("div",{staticClass:"metric-detail"},[t._v("\n              "+t._s(t.currentMetrics.memory_used)+"GB / "+t._s(t.currentMetrics.memory_total)+"GB\n            ")])])])]),t._v(" "),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"metric-card disk"},[s("div",{staticClass:"metric-icon"},[s("i",{staticClass:"el-icon-folder"})]),t._v(" "),s("div",{staticClass:"metric-content"},[s("div",{staticClass:"metric-value",class:t.getDiskStatusClass(t.currentMetrics.disk_percent)},[t._v("\n              "+t._s(t.currentMetrics.disk_percent)+"%\n            ")]),t._v(" "),s("div",{staticClass:"metric-label"},[t._v("ç£ç›˜ä½¿ç”¨ç‡")]),t._v(" "),s("div",{staticClass:"metric-detail"},[t._v("\n              å‰©ä½™: "+t._s(t.currentMetrics.disk_free)+"GB\n            ")])])])]),t._v(" "),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"metric-card network"},[s("div",{staticClass:"metric-icon"},[s("i",{staticClass:"el-icon-connection"})]),t._v(" "),s("div",{staticClass:"metric-content"},[s("div",{staticClass:"metric-value"},[t._v("\n              "+t._s(t.formatBytes(t.currentMetrics.network_sent))+"/s\n            ")]),t._v(" "),s("div",{staticClass:"metric-label"},[t._v("ç½‘ç»œå‘é€")]),t._v(" "),s("div",{staticClass:"metric-detail"},[t._v("\n              æ¥æ”¶: "+t._s(t.formatBytes(t.currentMetrics.network_recv))+"/s\n            ")])])])])],1)],1):t._e(),t._v(" "),t.selectedServer&&"connected"===t.connectionStatus?s("div",{staticClass:"charts-section"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"chart-panel"},[s("div",{staticClass:"panel-header"},[s("h3",[t._v("CPUä½¿ç”¨ç‡è¶‹åŠ¿")]),t._v(" "),s("div",{staticClass:"panel-controls"},[s("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.toggleChartFullscreen("cpu")}}},[s("i",{staticClass:"el-icon-full-screen"})])],1)]),t._v(" "),s("div",{ref:"cpuChart",staticClass:"chart-container"})])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"chart-panel"},[s("div",{staticClass:"panel-header"},[s("h3",[t._v("å†…å­˜ä½¿ç”¨è¶‹åŠ¿")]),t._v(" "),s("div",{staticClass:"panel-controls"},[s("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.toggleChartFullscreen("memory")}}},[s("i",{staticClass:"el-icon-full-screen"})])],1)]),t._v(" "),s("div",{ref:"memoryChart",staticClass:"chart-container"})])])],1),t._v(" "),s("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"chart-panel"},[s("div",{staticClass:"panel-header"},[s("h3",[t._v("ç£ç›˜I/O")]),t._v(" "),s("div",{staticClass:"panel-controls"},[s("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.toggleChartFullscreen("disk")}}},[s("i",{staticClass:"el-icon-full-screen"})])],1)]),t._v(" "),s("div",{ref:"diskChart",staticClass:"chart-container"})])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"chart-panel"},[s("div",{staticClass:"panel-header"},[s("h3",[t._v("ç½‘ç»œæµé‡")]),t._v(" "),s("div",{staticClass:"panel-controls"},[s("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.toggleChartFullscreen("network")}}},[s("i",{staticClass:"el-icon-full-screen"})])],1)]),t._v(" "),s("div",{ref:"networkChart",staticClass:"chart-container"})])])],1)],1):t._e(),t._v(" "),t.selectedServer&&"connected"===t.connectionStatus?s("div",{staticClass:"process-section"},[s("div",{staticClass:"section-header"},[s("h3",[t._v("è¿›ç¨‹ç›‘æ§")]),t._v(" "),s("el-button",{attrs:{size:"mini"},on:{click:t.refreshProcesses}},[t._v("åˆ·æ–°è¿›ç¨‹")])],1),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.topProcesses}},[s("el-table-column",{attrs:{prop:"pid",label:"PID",width:"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"è¿›ç¨‹å",width:"200"}}),t._v(" "),s("el-table-column",{attrs:{prop:"cpu_percent",label:"CPU%",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:t.getCpuStatusClass(e.row.cpu_percent)},[t._v("\n            "+t._s(e.row.cpu_percent)+"%\n          ")])]}}],null,!1,4156195574)}),t._v(" "),s("el-table-column",{attrs:{prop:"memory_percent",label:"å†…å­˜%",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:t.getMemoryStatusClass(e.row.memory_percent)},[t._v("\n            "+t._s(e.row.memory_percent)+"%\n          ")])]}}],null,!1,120968529)}),t._v(" "),s("el-table-column",{attrs:{prop:"memory_mb",label:"å†…å­˜(MB)",width:"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:"çŠ¶æ€",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"create_time",label:"å¯åŠ¨æ—¶é—´"}})],1)],1):t._e(),t._v(" "),t.selectedServer?t._e():s("div",{staticClass:"no-server-selected"},[s("div",{staticClass:"empty-state"},[s("i",{staticClass:"el-icon-monitor"}),t._v(" "),s("h3",[t._v("æ¬¢è¿ä½¿ç”¨æœåŠ¡å™¨ç›‘æ§ç³»ç»Ÿ")]),t._v(" "),s("p",[t._v("è¯·å…ˆé…ç½®è¦ç›‘æ§çš„æœåŠ¡å™¨")]),t._v(" "),t._m(0),t._v(" "),s("el-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){t.showServerConfig=!0}}},[s("i",{staticClass:"el-icon-plus"}),t._v(" é…ç½®ç¬¬ä¸€å°æœåŠ¡å™¨\n      ")])],1)]),t._v(" "),t.selectedServer&&"disconnected"===t.connectionStatus?s("div",{staticClass:"connection-failed"},[s("div",{staticClass:"error-state"},[s("i",{staticClass:"el-icon-warning"}),t._v(" "),s("h3",[t._v("æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨")]),t._v(" "),s("p",[t._v(t._s(t.currentServerInfo.name)+" ("+t._s(t.currentServerInfo.host)+")")]),t._v(" "),t._m(1),t._v(" "),s("div",{staticClass:"error-actions"},[s("el-button",{attrs:{loading:t.loading},on:{click:t.testConnection}},[s("i",{staticClass:"el-icon-refresh"}),t._v(" é‡æ–°è¿æ¥\n        ")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.editCurrentServer}},[s("i",{staticClass:"el-icon-edit"}),t._v(" ç¼–è¾‘é…ç½®\n        ")]),t._v(" "),s("el-button",{on:{click:t.loadServerData}},[s("i",{staticClass:"el-icon-connection"}),t._v(" è·å–æ•°æ®\n        ")])],1)])]):t._e(),t._v(" "),s("server-config-dialog",{attrs:{visible:t.showServerConfig,server:t.editingServer},on:{"update:visible":function(e){t.showServerConfig=e},save:t.onServerSaved,delete:t.onServerDeleted}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"setup-steps"},[s("div",{staticClass:"step"},[s("span",{staticClass:"step-number"},[t._v("1")]),t._v(" "),s("span",{staticClass:"step-text"},[t._v('ç‚¹å‡»"é…ç½®æœåŠ¡å™¨"æŒ‰é’®')])]),t._v(" "),s("div",{staticClass:"step"},[s("span",{staticClass:"step-number"},[t._v("2")]),t._v(" "),s("span",{staticClass:"step-text"},[t._v("å¡«å†™æœåŠ¡å™¨è¿æ¥ä¿¡æ¯")])]),t._v(" "),s("div",{staticClass:"step"},[s("span",{staticClass:"step-number"},[t._v("3")]),t._v(" "),s("span",{staticClass:"step-text"},[t._v("æµ‹è¯•è¿æ¥å¹¶ä¿å­˜é…ç½®")])]),t._v(" "),s("div",{staticClass:"step"},[s("span",{staticClass:"step-number"},[t._v("4")]),t._v(" "),s("span",{staticClass:"step-text"},[t._v("é€‰æ‹©æœåŠ¡å™¨å¼€å§‹ç›‘æ§")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"error-details"},[s("p",[t._v("å¯èƒ½çš„åŸå› ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("æœåŠ¡å™¨æœªå¯åŠ¨æˆ–ç½‘ç»œä¸é€š")]),t._v(" "),s("li",[t._v("SSHæœåŠ¡æœªè¿è¡Œæˆ–ç«¯å£è¢«é˜»æ‹¦")]),t._v(" "),s("li",[t._v("ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯")]),t._v(" "),s("li",[t._v("é˜²ç«å¢™é˜»æ­¢è¿æ¥")])])])}]};var C=s("VU/8")(_,g,!1,function(t){s("qmhh")},"data-v-2dd160e7",null);e.default=C.exports},qmhh:function(t,e){}});
//# sourceMappingURL=8.d70b33a3db5947765c54.js.map