webpackJsonp([13],{CZV9:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("gRE1"),a=s.n(i),r=s("mvHQ"),o=s.n(r),n=s("Dd8w"),l=s.n(n),c=s("//Fk"),u=s.n(c),m=s("Xxa5"),v=s.n(m),d=s("exGp"),p=s.n(d),h=s("XLwt"),f={name:"StressTest",data:function(){return{testConfig:{type:"http",url:"",method:"GET",concurrent:10,duration:60,cores:4,intensity:80,memorySize:512,pattern:"sequential",fileSize:100,operation:"mixed"},testing:!1,monitoring:!1,testResult:null,testHistory:[],currentMetrics:{cpu:0,memory:0,network:"0 KB/s",disk:"0 KB/s"},charts:{cpu:null,memory:null,network:null,disk:null,result:null},monitoringData:{cpu:[],memory:[],network:[],disk:[],timestamps:[]},monitoringTimer:null}},computed:{isConfigValid:function(){return"http"===this.testConfig.type?this.testConfig.url&&this.testConfig.concurrent>0&&this.testConfig.duration>0:this.testConfig.duration>0}},mounted:function(){this.initCharts(),this.loadTestHistory()},methods:{startTest:function(){var t=this;return p()(v.a.mark(function e(){var s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.testing=!0,t.testResult=null,e.prev=2,e.next=5,t.executeTest();case 5:s=e.sent,t.testResult=s,t.addToHistory(s),t.$message.success("测试完成"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),t.$message.error("测试失败: "+e.t0.message);case 14:return e.prev=14,t.testing=!1,e.finish(14);case 17:case"end":return e.stop()}},e,t,[[2,11,14,17]])}))()},stopTest:function(){this.testing=!1,this.$message.info("测试已停止")},executeTest:function(){var t=this;return p()(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new u.a(function(e){setTimeout(function(){var s={type:t.testConfig.type,duration:t.testConfig.duration,status:"completed",startTime:new Date,endTime:new Date(Date.now()+1e3*t.testConfig.duration)};"http"===t.testConfig.type&&(s.totalRequests=t.testConfig.concurrent*t.testConfig.duration,s.successRequests=Math.floor(.95*s.totalRequests),s.avgResponseTime=Math.floor(200*Math.random()+50),s.qps=Math.floor(s.totalRequests/t.testConfig.duration)),e(s)},2e3)}));case 1:case"end":return e.stop()}},e,t)}))()},toggleMonitoring:function(){this.monitoring?this.stopMonitoring():this.startMonitoring()},startMonitoring:function(){var t=this;this.monitoring=!0,this.monitoringTimer=setInterval(function(){t.updateMetrics()},1e3)},stopMonitoring:function(){this.monitoring=!1,this.monitoringTimer&&(clearInterval(this.monitoringTimer),this.monitoringTimer=null)},updateMetrics:function(){var t=Math.floor(100*Math.random()),e=Math.floor(100*Math.random()),s=Math.floor(1e3*Math.random()),i=Math.floor(500*Math.random());this.currentMetrics={cpu:t,memory:e,network:s+" KB/s",disk:i+" KB/s"};var a=(new Date).toLocaleTimeString();this.monitoringData.timestamps.push(a),this.monitoringData.cpu.push(t),this.monitoringData.memory.push(e),this.monitoringData.network.push(s),this.monitoringData.disk.push(i),this.monitoringData.timestamps.length>50&&(this.monitoringData.timestamps.shift(),this.monitoringData.cpu.shift(),this.monitoringData.memory.shift(),this.monitoringData.network.shift(),this.monitoringData.disk.shift()),this.updateCharts()},initCharts:function(){var t=this;this.$nextTick(function(){t.$refs.cpuChart&&(t.charts.cpu=h.a(t.$refs.cpuChart)),t.$refs.memoryChart&&(t.charts.memory=h.a(t.$refs.memoryChart)),t.$refs.networkChart&&(t.charts.network=h.a(t.$refs.networkChart)),t.$refs.diskChart&&(t.charts.disk=h.a(t.$refs.diskChart))})},updateCharts:function(){var t={tooltip:{trigger:"axis"},xAxis:{type:"category",data:this.monitoringData.timestamps},yAxis:{type:"value"},series:[{type:"line",smooth:!0,areaStyle:{opacity:.3}}]};this.charts.cpu&&this.charts.cpu.setOption(l()({},t,{series:[l()({},t.series[0],{data:this.monitoringData.cpu,itemStyle:{color:"#409EFF"}})]})),this.charts.memory&&this.charts.memory.setOption(l()({},t,{series:[l()({},t.series[0],{data:this.monitoringData.memory,itemStyle:{color:"#67C23A"}})]})),this.charts.network&&this.charts.network.setOption(l()({},t,{series:[l()({},t.series[0],{data:this.monitoringData.network,itemStyle:{color:"#E6A23C"}})]})),this.charts.disk&&this.charts.disk.setOption(l()({},t,{series:[l()({},t.series[0],{data:this.monitoringData.disk,itemStyle:{color:"#F56C6C"}})]}))},getTestTypeName:function(t){return{http:"HTTP压力测试",cpu:"CPU压力测试",memory:"内存压力测试",disk:"磁盘I/O测试"}[t]||t},getStatusText:function(t){return{running:"运行中",completed:"已完成",failed:"失败",stopped:"已停止"}[t]||t},formatTime:function(t){return new Date(t).toLocaleString()},addToHistory:function(t){this.testHistory.unshift(t),this.testHistory.length>10&&this.testHistory.pop(),this.saveTestHistory()},loadTestHistory:function(){var t=localStorage.getItem("stressTestHistory");t&&(this.testHistory=JSON.parse(t))},saveTestHistory:function(){localStorage.setItem("stressTestHistory",o()(this.testHistory))},viewTestResult:function(t){this.testResult=t}},beforeDestroy:function(){this.stopMonitoring(),a()(this.charts).forEach(function(t){t&&t.dispose()})}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"stress-test"},[t._m(0),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-card",{staticClass:"config-card"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",[t._v("⚙️ 测试配置")])]),t._v(" "),s("el-form",{attrs:{model:t.testConfig,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"测试类型"}},[s("el-select",{attrs:{placeholder:"选择测试类型"},model:{value:t.testConfig.type,callback:function(e){t.$set(t.testConfig,"type",e)},expression:"testConfig.type"}},[s("el-option",{attrs:{label:"HTTP压力测试",value:"http"}}),t._v(" "),s("el-option",{attrs:{label:"CPU压力测试",value:"cpu"}}),t._v(" "),s("el-option",{attrs:{label:"内存压力测试",value:"memory"}}),t._v(" "),s("el-option",{attrs:{label:"磁盘I/O测试",value:"disk"}})],1)],1),t._v(" "),"http"===t.testConfig.type?s("div",[s("el-form-item",{attrs:{label:"目标URL"}},[s("el-input",{attrs:{placeholder:"http://example.com/api"},model:{value:t.testConfig.url,callback:function(e){t.$set(t.testConfig,"url",e)},expression:"testConfig.url"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"请求方法"}},[s("el-select",{model:{value:t.testConfig.method,callback:function(e){t.$set(t.testConfig,"method",e)},expression:"testConfig.method"}},[s("el-option",{attrs:{label:"GET",value:"GET"}}),t._v(" "),s("el-option",{attrs:{label:"POST",value:"POST"}}),t._v(" "),s("el-option",{attrs:{label:"PUT",value:"PUT"}}),t._v(" "),s("el-option",{attrs:{label:"DELETE",value:"DELETE"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"并发用户"}},[s("el-input-number",{attrs:{min:1,max:1e3},model:{value:t.testConfig.concurrent,callback:function(e){t.$set(t.testConfig,"concurrent",e)},expression:"testConfig.concurrent"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"测试时长"}},[s("el-input-number",{attrs:{min:10,max:3600,placeholder:"秒"},model:{value:t.testConfig.duration,callback:function(e){t.$set(t.testConfig,"duration",e)},expression:"testConfig.duration"}})],1)],1):t._e(),t._v(" "),"cpu"===t.testConfig.type?s("div",[s("el-form-item",{attrs:{label:"CPU核心数"}},[s("el-input-number",{attrs:{min:1,max:16},model:{value:t.testConfig.cores,callback:function(e){t.$set(t.testConfig,"cores",e)},expression:"testConfig.cores"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"测试时长"}},[s("el-input-number",{attrs:{min:10,max:3600,placeholder:"秒"},model:{value:t.testConfig.duration,callback:function(e){t.$set(t.testConfig,"duration",e)},expression:"testConfig.duration"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"负载强度"}},[s("el-slider",{attrs:{min:10,max:100,"show-stops":""},model:{value:t.testConfig.intensity,callback:function(e){t.$set(t.testConfig,"intensity",e)},expression:"testConfig.intensity"}})],1)],1):t._e(),t._v(" "),"memory"===t.testConfig.type?s("div",[s("el-form-item",{attrs:{label:"内存大小"}},[s("el-input-number",{attrs:{min:100,max:8192,placeholder:"MB"},model:{value:t.testConfig.memorySize,callback:function(e){t.$set(t.testConfig,"memorySize",e)},expression:"testConfig.memorySize"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"测试时长"}},[s("el-input-number",{attrs:{min:10,max:3600,placeholder:"秒"},model:{value:t.testConfig.duration,callback:function(e){t.$set(t.testConfig,"duration",e)},expression:"testConfig.duration"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"访问模式"}},[s("el-select",{model:{value:t.testConfig.pattern,callback:function(e){t.$set(t.testConfig,"pattern",e)},expression:"testConfig.pattern"}},[s("el-option",{attrs:{label:"顺序访问",value:"sequential"}}),t._v(" "),s("el-option",{attrs:{label:"随机访问",value:"random"}})],1)],1)],1):t._e(),t._v(" "),"disk"===t.testConfig.type?s("div",[s("el-form-item",{attrs:{label:"文件大小"}},[s("el-input-number",{attrs:{min:10,max:1024,placeholder:"MB"},model:{value:t.testConfig.fileSize,callback:function(e){t.$set(t.testConfig,"fileSize",e)},expression:"testConfig.fileSize"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"测试时长"}},[s("el-input-number",{attrs:{min:10,max:3600,placeholder:"秒"},model:{value:t.testConfig.duration,callback:function(e){t.$set(t.testConfig,"duration",e)},expression:"testConfig.duration"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"操作类型"}},[s("el-select",{model:{value:t.testConfig.operation,callback:function(e){t.$set(t.testConfig,"operation",e)},expression:"testConfig.operation"}},[s("el-option",{attrs:{label:"读取",value:"read"}}),t._v(" "),s("el-option",{attrs:{label:"写入",value:"write"}}),t._v(" "),s("el-option",{attrs:{label:"读写混合",value:"mixed"}})],1)],1)],1):t._e(),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.testing,disabled:!t.isConfigValid},on:{click:t.startTest}},[t._v("\n              "+t._s(t.testing?"测试中...":"开始测试")+"\n            ")]),t._v(" "),s("el-button",{attrs:{disabled:!t.testing},on:{click:t.stopTest}},[t._v("停止测试")])],1)],1)],1),t._v(" "),s("el-card",{staticClass:"history-card",staticStyle:{"margin-top":"20px"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",[t._v("📋 测试历史")])]),t._v(" "),s("div",{staticClass:"history-list"},t._l(t.testHistory,function(e,i){return s("div",{key:i,staticClass:"history-item",on:{click:function(s){return t.viewTestResult(e)}}},[s("div",{staticClass:"history-info"},[s("div",{staticClass:"history-type"},[t._v(t._s(t.getTestTypeName(e.type)))]),t._v(" "),s("div",{staticClass:"history-time"},[t._v(t._s(t.formatTime(e.startTime)))])]),t._v(" "),s("div",{staticClass:"history-status",class:e.status},[t._v("\n              "+t._s(t.getStatusText(e.status))+"\n            ")])])}),0)])],1),t._v(" "),s("el-col",{attrs:{span:16}},[s("el-card",{staticClass:"monitor-card"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",[t._v("📊 实时监控")]),t._v(" "),s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.toggleMonitoring}},[t._v("\n            "+t._s(t.monitoring?"停止监控":"开始监控")+"\n          ")])],1),t._v(" "),s("div",{staticClass:"monitor-charts"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"chart-container"},[s("h4",[t._v("CPU使用率")]),t._v(" "),s("div",{ref:"cpuChart",staticClass:"chart"})])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"chart-container"},[s("h4",[t._v("内存使用率")]),t._v(" "),s("div",{ref:"memoryChart",staticClass:"chart"})])])],1),t._v(" "),s("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"chart-container"},[s("h4",[t._v("网络I/O")]),t._v(" "),s("div",{ref:"networkChart",staticClass:"chart"})])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"chart-container"},[s("h4",[t._v("磁盘I/O")]),t._v(" "),s("div",{ref:"diskChart",staticClass:"chart"})])])],1)],1),t._v(" "),s("div",{staticClass:"metrics-panel"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"metric-item"},[s("div",{staticClass:"metric-value"},[t._v(t._s(t.currentMetrics.cpu)+"%")]),t._v(" "),s("div",{staticClass:"metric-label"},[t._v("CPU使用率")])])]),t._v(" "),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"metric-item"},[s("div",{staticClass:"metric-value"},[t._v(t._s(t.currentMetrics.memory)+"%")]),t._v(" "),s("div",{staticClass:"metric-label"},[t._v("内存使用率")])])]),t._v(" "),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"metric-item"},[s("div",{staticClass:"metric-value"},[t._v(t._s(t.currentMetrics.network))]),t._v(" "),s("div",{staticClass:"metric-label"},[t._v("网络速度")])])]),t._v(" "),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"metric-item"},[s("div",{staticClass:"metric-value"},[t._v(t._s(t.currentMetrics.disk))]),t._v(" "),s("div",{staticClass:"metric-label"},[t._v("磁盘I/O")])])])],1)],1)]),t._v(" "),t.testResult?s("el-card",{staticClass:"result-card",staticStyle:{"margin-top":"20px"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",[t._v("📈 测试结果")])]),t._v(" "),s("div",{staticClass:"result-content"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"result-item"},[s("div",{staticClass:"result-label"},[t._v("测试类型")]),t._v(" "),s("div",{staticClass:"result-value"},[t._v(t._s(t.getTestTypeName(t.testResult.type)))])])]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"result-item"},[s("div",{staticClass:"result-label"},[t._v("测试时长")]),t._v(" "),s("div",{staticClass:"result-value"},[t._v(t._s(t.testResult.duration)+"秒")])])]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"result-item"},[s("div",{staticClass:"result-label"},[t._v("测试状态")]),t._v(" "),s("div",{staticClass:"result-value",class:t.testResult.status},[t._v("\n                  "+t._s(t.getStatusText(t.testResult.status))+"\n                ")])])])],1),t._v(" "),"http"===t.testResult.type?s("div",{staticClass:"http-results"},[s("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"result-item"},[s("div",{staticClass:"result-label"},[t._v("总请求数")]),t._v(" "),s("div",{staticClass:"result-value"},[t._v(t._s(t.testResult.totalRequests))])])]),t._v(" "),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"result-item"},[s("div",{staticClass:"result-label"},[t._v("成功请求")]),t._v(" "),s("div",{staticClass:"result-value"},[t._v(t._s(t.testResult.successRequests))])])]),t._v(" "),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"result-item"},[s("div",{staticClass:"result-label"},[t._v("平均响应时间")]),t._v(" "),s("div",{staticClass:"result-value"},[t._v(t._s(t.testResult.avgResponseTime)+"ms")])])]),t._v(" "),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"result-item"},[s("div",{staticClass:"result-label"},[t._v("QPS")]),t._v(" "),s("div",{staticClass:"result-value"},[t._v(t._s(t.testResult.qps))])])])],1)],1):t._e(),t._v(" "),s("div",{staticClass:"result-charts",staticStyle:{"margin-top":"20px"}},[s("div",{ref:"resultChart",staticClass:"chart",staticStyle:{height:"300px"}})])],1)]):t._e()],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-header"},[e("h1",[this._v("🔧 压力测试工具")]),this._v(" "),e("p",[this._v("配置和执行系统压力测试，实时监控性能指标")])])}]};var C=s("VU/8")(f,g,!1,function(t){s("xc7B")},"data-v-3a5eb421",null);e.default=C.exports},xc7B:function(t,e){}});
//# sourceMappingURL=13.f2898870bd85b7684194.js.map