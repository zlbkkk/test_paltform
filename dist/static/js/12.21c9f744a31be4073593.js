webpackJsonp([12],{DDrk:function(t,s){},lePs:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("gRE1"),i=e.n(a),r=e("//Fk"),n=e.n(r),l=e("Xxa5"),o=e.n(l),c=e("exGp"),v=e.n(c),_=e("XLwt"),u=e("vLgD");var d={name:"MonitorAnalysis",data:function(){return{loading:!1,analysisResult:null,charts:{cpu:null,memory:null,load:null,core:null}}},methods:{handleFileUpload:function(t){var s=this;return v()(o.a.mark(function e(){var a,i,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.size>10485760)){e.next=3;break}return s.$message.error("æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡10MB"),e.abrupt("return",!1);case 3:return s.loading=!0,e.prev=4,e.next=7,s.readFileAsText(t);case 7:return a=e.sent,i=JSON.parse(a),e.next=11,n=i,Object(u.a)({url:"/api/analyze-monitoring-data",method:"post",data:n});case 11:(r=e.sent).success?(s.analysisResult=r.analysis,s.$nextTick(function(){s.initCharts()}),s.$message.success("ç›‘æ§æ•°æ®åˆ†æå®Œæˆ")):s.$message.error(r.error||"åˆ†æå¤±è´¥"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),console.error("åˆ†æé”™è¯¯:",e.t0),e.t0 instanceof SyntaxError?s.$message.error("JSONæ–‡ä»¶æ ¼å¼é”™è¯¯"):s.$message.error("åˆ†æè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯: "+e.t0.message);case 19:return e.prev=19,s.loading=!1,e.finish(19);case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}var n},e,s,[[4,15,19,22]])}))()},readFileAsText:function(t){return new n.a(function(s,e){var a=new FileReader;a.onload=function(t){return s(t.target.result)},a.onerror=e,a.readAsText(t)})},resetAnalysis:function(){this.analysisResult=null,this.destroyCharts()},getScoreClass:function(t){return t>=85?"score-excellent":t>=70?"score-good":"score-poor"},getScoreText:function(t){return t>=85?"ä¼˜ç§€":t>=70?"è‰¯å¥½":"éœ€è¦ä¼˜åŒ–"},getScoreDescription:function(t){return t>=85?"ç³»ç»Ÿæ€§èƒ½è¡¨ç°ä¼˜ç§€ï¼Œè¿è¡Œç¨³å®š":t>=70?"ç³»ç»Ÿæ€§èƒ½è‰¯å¥½ï¼Œæœ‰å°‘é‡ä¼˜åŒ–ç©ºé—´":"ç³»ç»Ÿå­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œå»ºè®®ç«‹å³ä¼˜åŒ–"},getBottleneckIcon:function(t){return{critical:"ğŸ”´",high:"ğŸŸ ",medium:"ğŸŸ¡",low:"ğŸ”µ"}[t]||"ğŸ”µ"},getTagType:function(t){return{critical:"danger",high:"warning",medium:"info",low:"success"}[t]||"info"},getSeverityText:function(t){return{critical:"ä¸¥é‡",high:"é«˜",medium:"ä¸­",low:"ä½"}[t]||"æœªçŸ¥"},initCharts:function(){this.initCpuChart(),this.initMemoryChart(),this.initLoadChart(),this.initCoreChart()},initCpuChart:function(){if(this.$refs.cpuChart){this.charts.cpu=_.a(this.$refs.cpuChart);var t=this.analysisResult.charts_data.cpu_timeline,s={tooltip:{trigger:"axis",formatter:"{b}<br/>CPUä½¿ç”¨ç‡: {c}%"},xAxis:{type:"category",data:t.map(function(t){return new Date(t.time).toLocaleTimeString()})},yAxis:{type:"value",min:0,max:100,axisLabel:{formatter:"{value}%"}},series:[{data:t.map(function(t){return t.cpu_percent}),type:"line",smooth:!0,itemStyle:{color:"#409EFF"},areaStyle:{opacity:.3}}]};this.charts.cpu.setOption(s)}},initMemoryChart:function(){if(this.$refs.memoryChart){this.charts.memory=_.a(this.$refs.memoryChart);var t=this.analysisResult.charts_data.memory_timeline,s={tooltip:{trigger:"axis"},legend:{data:["å†…å­˜ä½¿ç”¨ç‡","äº¤æ¢åˆ†åŒºä½¿ç”¨ç‡"]},xAxis:{type:"category",data:t.map(function(t){return new Date(t.time).toLocaleTimeString()})},yAxis:{type:"value",min:0,max:100,axisLabel:{formatter:"{value}%"}},series:[{name:"å†…å­˜ä½¿ç”¨ç‡",data:t.map(function(t){return t.memory_percent}),type:"line",smooth:!0,itemStyle:{color:"#67C23A"}},{name:"äº¤æ¢åˆ†åŒºä½¿ç”¨ç‡",data:t.map(function(t){return t.swap_percent}),type:"line",smooth:!0,itemStyle:{color:"#F56C6C"}}]};this.charts.memory.setOption(s)}},initLoadChart:function(){if(this.$refs.loadChart){this.charts.load=_.a(this.$refs.loadChart);var t=this.analysisResult.charts_data.cpu_timeline,s={tooltip:{trigger:"axis",formatter:"{b}<br/>è´Ÿè½½: {c}"},xAxis:{type:"category",data:t.map(function(t){return new Date(t.time).toLocaleTimeString()})},yAxis:{type:"value",min:0},series:[{data:t.map(function(t){return t.load_1min}),type:"line",smooth:!0,itemStyle:{color:"#E6A23C"},areaStyle:{opacity:.3}}]};this.charts.load.setOption(s)}},initCoreChart:function(){if(this.$refs.coreChart){this.charts.core=_.a(this.$refs.coreChart);var t=this.analysisResult.charts_data.cpu_cores,s={tooltip:{trigger:"axis",formatter:"{b}<br/>ä½¿ç”¨ç‡: {c}%"},xAxis:{type:"category",data:t.map(function(t){return t.core})},yAxis:{type:"value",min:0,max:100,axisLabel:{formatter:"{value}%"}},series:[{data:t.map(function(t){return{value:t.usage,itemStyle:{color:t.usage>80?"#F56C6C":t.usage>60?"#E6A23C":"#67C23A"}}}),type:"bar"}]};this.charts.core.setOption(s)}},destroyCharts:function(){i()(this.charts).forEach(function(t){t&&t.dispose()}),this.charts={cpu:null,memory:null,load:null,core:null}}},beforeDestroy:function(){this.destroyCharts()}},m={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"monitor-analysis"},[t._m(0),t._v(" "),t.analysisResult?t._e():e("el-card",{staticClass:"upload-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("ğŸ“ ä¸Šä¼ ç›‘æ§æ•°æ®")])]),t._v(" "),e("el-upload",{staticClass:"upload-dragger",attrs:{drag:"",action:"","before-upload":t.handleFileUpload,"show-file-list":!1,accept:".json"}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n        å°†ç›‘æ§æ•°æ®æ–‡ä»¶æ‹–åˆ°æ­¤å¤„ï¼Œæˆ–"),e("em",[t._v("ç‚¹å‡»ä¸Šä¼ ")])]),t._v(" "),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("\n        åªèƒ½ä¸Šä¼ JSONæ ¼å¼çš„ç›‘æ§æ•°æ®æ–‡ä»¶ï¼Œä¸”ä¸è¶…è¿‡10MB\n      ")])]),t._v(" "),e("div",{staticClass:"upload-examples"},[e("h4",[t._v("ğŸ’¡ æ”¯æŒçš„ç›‘æ§æ•°æ®æ ¼å¼ï¼š")]),t._v(" "),e("ul",[e("li",[t._v("Linuxç³»ç»Ÿç›‘æ§æ•°æ® (system_monitor_*.json)")]),t._v(" "),e("li",[t._v("åŒ…å«CPUã€å†…å­˜ã€è´Ÿè½½ç­‰æ€§èƒ½æŒ‡æ ‡")]),t._v(" "),e("li",[t._v("æ—¶é—´åºåˆ—æ•°æ®ï¼Œæ”¯æŒ5åˆ†é’Ÿåˆ°æ•°å°æ—¶çš„ç›‘æ§å‘¨æœŸ")])])])],1),t._v(" "),t.loading?e("el-card",{staticClass:"loading-card"},[e("div",{staticClass:"loading-content"},[e("el-spinner",{attrs:{size:"large"}}),t._v(" "),e("h3",[t._v("ğŸ¤– AIæ­£åœ¨åˆ†æç›‘æ§æ•°æ®...")]),t._v(" "),e("p",[t._v("æ­£åœ¨è¯†åˆ«æ€§èƒ½ç“¶é¢ˆå’Œä¼˜åŒ–æœºä¼šï¼Œè¯·ç¨å€™")])],1)]):t._e(),t._v(" "),t.analysisResult&&!t.loading?e("div",{staticClass:"analysis-results"},[e("el-card",{staticClass:"system-info-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("ğŸ–¥ï¸ ç³»ç»Ÿä¿¡æ¯")]),t._v(" "),e("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.resetAnalysis}},[t._v("\n          é‡æ–°åˆ†æ\n        ")])],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("div",{staticClass:"info-item"},[e("label",[t._v("ä¸»æœºå:")]),t._v(" "),e("span",[t._v(t._s(t.analysisResult.system_info.hostname))])])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"info-item"},[e("label",[t._v("ç³»ç»Ÿ:")]),t._v(" "),e("span",[t._v(t._s(t.analysisResult.system_info.system)+" "+t._s(t.analysisResult.system_info.release))])])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"info-item"},[e("label",[t._v("CPUæ ¸å¿ƒ:")]),t._v(" "),e("span",[t._v(t._s(t.analysisResult.system_info.cpu_count_logical)+"ä¸ªé€»è¾‘æ ¸å¿ƒ")])])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"info-item"},[e("label",[t._v("æ€»å†…å­˜:")]),t._v(" "),e("span",[t._v(t._s(t.analysisResult.system_info.total_memory_gb)+"GB")])])])],1),t._v(" "),e("el-row",{staticStyle:{"margin-top":"15px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("div",{staticClass:"info-item"},[e("label",[t._v("CPUå‹å·:")]),t._v(" "),e("span",[t._v(t._s(t.analysisResult.system_info.cpu_model||"Unknown"))])])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"info-item"},[e("label",[t._v("ç›‘æ§æ—¶é•¿:")]),t._v(" "),e("span",[t._v(t._s(t.analysisResult.monitoring_summary.duration_seconds)+"ç§’")])])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"info-item"},[e("label",[t._v("æ•°æ®ç‚¹æ•°:")]),t._v(" "),e("span",[t._v(t._s(t.analysisResult.monitoring_summary.cpu_data_points)+"ä¸ª")])])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"info-item"},[e("label",[t._v("é‡‡æ ·é—´éš”:")]),t._v(" "),e("span",[t._v(t._s(t.analysisResult.monitoring_summary.sample_interval)+"ç§’")])])])],1)],1),t._v(" "),e("el-card",{staticClass:"score-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("ğŸ¯ æ€§èƒ½è¯„åˆ†")])]),t._v(" "),e("div",{staticClass:"score-display"},[e("div",{staticClass:"score-circle",class:t.getScoreClass(t.analysisResult.performance_score)},[t._v("\n          "+t._s(t.analysisResult.performance_score)+"\n        ")]),t._v(" "),e("div",{staticClass:"score-text"},[e("h3",[t._v(t._s(t.getScoreText(t.analysisResult.performance_score)))]),t._v(" "),e("p",[t._v(t._s(t.getScoreDescription(t.analysisResult.performance_score)))])])])]),t._v(" "),e("el-card",{staticClass:"charts-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("ğŸ“ˆ æ€§èƒ½è¶‹åŠ¿å›¾è¡¨")])]),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("div",{staticClass:"chart-container"},[e("h4",[t._v("CPUä½¿ç”¨ç‡è¶‹åŠ¿")]),t._v(" "),e("div",{ref:"cpuChart",staticClass:"chart"})])]),t._v(" "),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"chart-container"},[e("h4",[t._v("å†…å­˜ä½¿ç”¨ç‡è¶‹åŠ¿")]),t._v(" "),e("div",{ref:"memoryChart",staticClass:"chart"})])])],1),t._v(" "),e("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("div",{staticClass:"chart-container"},[e("h4",[t._v("ç³»ç»Ÿè´Ÿè½½è¶‹åŠ¿")]),t._v(" "),e("div",{ref:"loadChart",staticClass:"chart"})])]),t._v(" "),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"chart-container"},[e("h4",[t._v("CPUæ ¸å¿ƒä½¿ç”¨ç‡")]),t._v(" "),e("div",{ref:"coreChart",staticClass:"chart"})])])],1)],1),t._v(" "),t.analysisResult.bottlenecks.length>0?e("el-card",{staticClass:"bottlenecks-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("âš ï¸ æ€§èƒ½ç“¶é¢ˆåˆ†æ")])]),t._v(" "),e("div",{staticClass:"bottlenecks-list"},t._l(t.analysisResult.bottlenecks,function(s,a){return e("div",{key:a,staticClass:"bottleneck-item",class:"bottleneck-"+s.severity},[e("div",{staticClass:"bottleneck-header"},[e("span",{staticClass:"bottleneck-icon"},[t._v(t._s(t.getBottleneckIcon(s.severity)))]),t._v(" "),e("span",{staticClass:"bottleneck-title"},[t._v(t._s(s.description))]),t._v(" "),e("el-tag",{attrs:{type:t.getTagType(s.severity),size:"small"}},[t._v("\n              "+t._s(t.getSeverityText(s.severity))+"\n            ")])],1),t._v(" "),e("div",{staticClass:"bottleneck-impact"},[e("strong",[t._v("å½±å“:")]),t._v(" "+t._s(s.impact)+"\n          ")])])}),0)]):t._e(),t._v(" "),t.analysisResult.recommendations.length>0?e("el-card",{staticClass:"recommendations-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("ğŸ’¡ ä¼˜åŒ–å»ºè®®")])]),t._v(" "),e("div",{staticClass:"recommendations-list"},t._l(t.analysisResult.recommendations,function(s,a){return e("div",{key:a,staticClass:"recommendation-item"},[e("div",{staticClass:"recommendation-number"},[t._v(t._s(a+1))]),t._v(" "),e("div",{staticClass:"recommendation-content"},[t._v(t._s(s))])])}),0)]):t._e(),t._v(" "),0===t.analysisResult.bottlenecks.length?e("el-card",{staticClass:"no-issues-card"},[e("div",{staticClass:"no-issues-content"},[e("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"48px",color:"#67C23A"}}),t._v(" "),e("h3",[t._v("ğŸ‰ æœªå‘ç°æ˜æ˜¾çš„æ€§èƒ½ç“¶é¢ˆ")]),t._v(" "),e("p",[t._v("ç³»ç»Ÿè¿è¡ŒçŠ¶å†µè‰¯å¥½ï¼Œæ€§èƒ½è¡¨ç°ä¼˜ç§€")])])]):t._e()],1):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"page-header"},[s("h1",[this._v("ğŸ“Š æ€§èƒ½ç›‘æ§æ•°æ®åˆ†æ")]),this._v(" "),s("p",[this._v("ä¸Šä¼ ç³»ç»Ÿç›‘æ§æ•°æ®ï¼Œè·å–AIé©±åŠ¨çš„æ€§èƒ½ç“¶é¢ˆåˆ†æå’Œä¼˜åŒ–å»ºè®®")])])}]};var p=e("VU/8")(d,m,!1,function(t){e("DDrk")},"data-v-52bcddf8",null);s.default=p.exports}});
//# sourceMappingURL=12.21c9f744a31be4073593.js.map