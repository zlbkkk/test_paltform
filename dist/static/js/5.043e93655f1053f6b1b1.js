webpackJsonp([5],{"9bBU":function(t,e,a){a("mClu");var l=a("FeBl").Object;t.exports=function(t,e,a){return l.defineProperty(t,e,a)}},C4MV:function(t,e,a){t.exports={default:a("9bBU"),__esModule:!0}},Junj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("woOf"),i=a.n(l),s=a("bOdI"),n=a.n(s),o=a("cAgV"),r={name:"UiElement",components:{Pagination:a("1onU").a},directives:{waves:o.a},filters:{locatorTypeFilter:function(t){return{css:"primary",xpath:"success",id:"warning",name:"info",class:"danger"}[t]||"default"}},data:function(){return{tableKey:0,list:null,total:0,listLoading:!0,listQuery:n()({page:1,limit:20,name:void 0},"page",void 0),pageOptions:[{value:1,label:"登录页面"},{value:2,label:"首页"},{value:3,label:"商品列表页"},{value:4,label:"购物车页面"},{value:5,label:"订单页面"}],temp:{id:void 0,name:"",page_id:void 0,locator_type:"css",locator:"",description:"",wait_strategy:{type:"visible",timeout:10,poll_frequency:500}},dialogFormVisible:!1,captureDialogVisible:!1,dialogStatus:"",textMap:{update:"编辑元素",create:"创建元素"},rules:{name:[{required:!0,message:"元素名称是必填项",trigger:"blur"}],page_id:[{required:!0,message:"所属页面是必填项",trigger:"change"}],locator_type:[{required:!0,message:"定位方式是必填项",trigger:"change"}],locator:[{required:!0,message:"定位表达式是必填项",trigger:"blur"}]},validating:!1,validationResult:{success:!1,message:""},captureForm:{url:"",browser:"chrome"},capturing:!1,capturedElements:[]}},computed:{locatorPlaceholder:function(){return{css:'#login-btn, .submit-button, input[type="text"]',xpath:'//button[@id="login-btn"], //input[@name="username"]',id:"login-btn",name:"username",class:"submit-button",tag:"button",link_text:"登录",partial_link_text:"登"}[this.temp.locator_type]||""},locatorTips:function(){return{css:'CSS选择器，如：#id, .class, input[type="text"]',xpath:'XPath表达式，如：//button[@id="login"], //input[@name="username"]',id:"元素的id属性值",name:"元素的name属性值",class:"元素的class属性值",tag:"元素的标签名",link_text:"链接的完整文本内容",partial_link_text:"链接的部分文本内容"}[this.temp.locator_type]||""}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,setTimeout(function(){t.list=[{id:1,name:"登录按钮",locator_type:"css",locator:"#login-btn",page_name:"登录页面",status:"valid",last_validated:new Date("2024-01-15 10:30:00")},{id:2,name:"用户名输入框",locator_type:"xpath",locator:'//input[@name="username"]',page_name:"登录页面",status:"valid",last_validated:new Date("2024-01-15 09:15:00")},{id:3,name:"搜索按钮",locator_type:"id",locator:"search-btn",page_name:"首页",status:"invalid",last_validated:new Date("2024-01-14 16:45:00")}],t.total=t.list.length,t.listLoading=!1},1e3)},handleFilter:function(){this.listQuery.page=1,this.getList()},resetTemp:function(){this.temp={id:void 0,name:"",page_id:void 0,locator_type:"css",locator:"",description:"",wait_strategy:{type:"visible",timeout:10,poll_frequency:500}},this.validationResult={success:!1,message:""}},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},createData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){t.temp.id=parseInt(100*Math.random())+1024;var a=t.pageOptions.find(function(e){return e.value===t.temp.page_id});t.temp.page_name=a?a.label:"",t.temp.status="valid",t.temp.last_validated=new Date,t.list.unshift(t.temp),t.dialogFormVisible=!1,t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})}})},handleUpdate:function(t){var e=this;this.temp=i()({},t);var a=this.pageOptions.find(function(e){return e.label===t.page_name});this.temp.page_id=a?a.value:"",this.temp.wait_strategy||(this.temp.wait_strategy={type:"visible",timeout:10,poll_frequency:500}),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()})},updateData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){var a=i()({},t.temp),l=t.pageOptions.find(function(t){return t.value===a.page_id});a.page_name=l?l.label:"";var s=t.list.findIndex(function(e){return e.id===t.temp.id});t.list.splice(s,1,a),t.dialogFormVisible=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})}})},handleDelete:function(t,e){var a=this;this.$confirm("确认删除该元素?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.list.splice(e,1),a.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})})},handleValidate:function(t){var e=this;this.$message({message:"正在验证元素定位...",type:"info"}),setTimeout(function(){t.status=Math.random()>.3?"valid":"invalid",t.last_validated=new Date,e.$message({message:"valid"===t.status?"元素定位有效":"元素定位无效",type:"valid"===t.status?"success":"error"})},2e3)},handleHighlight:function(t){this.$message({message:"正在高亮显示元素...",type:"info"})},handleCapture:function(){this.captureDialogVisible=!0},onLocatorTypeChange:function(){this.temp.locator="",this.validationResult={success:!1,message:""}},validateElement:function(){var t=this;this.temp.locator?(this.validating=!0,setTimeout(function(){var e=Math.random()>.3;t.validationResult={success:e,message:e?"找到1个匹配的元素":"未找到匹配的元素，请检查定位表达式"},t.validating=!1},2e3)):this.$message.error("请先输入定位表达式")},highlightElement:function(){this.$message({message:"正在高亮显示元素...",type:"info"})},startCapture:function(){var t=this;this.captureForm.url?(this.capturing=!0,this.$message({message:"正在启动浏览器进行元素捕获...",type:"info"}),setTimeout(function(){t.capturedElements=[{name:"登录按钮",locator_type:"css",locator:"#login-btn"},{name:"用户名输入框",locator_type:"id",locator:"username"},{name:"密码输入框",locator_type:"id",locator:"password"}],t.$message.success("元素捕获完成")},3e3)):this.$message.error("请输入目标页面URL")},stopCapture:function(){this.capturing=!1,this.$message({message:"已停止元素捕获",type:"info"})},addCapturedElement:function(t){this.temp={id:void 0,name:t.name,page_id:void 0,locator_type:t.locator_type,locator:t.locator,description:"",wait_strategy:{type:"visible",timeout:10,poll_frequency:500}},this.dialogStatus="create",this.captureDialogVisible=!1,this.dialogFormVisible=!0},removeCapturedElement:function(t){this.capturedElements.splice(t,1)}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"元素名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter.apply(null,arguments)}},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}}),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"所属页面",clearable:""},model:{value:t.listQuery.page,callback:function(e){t.$set(t.listQuery,"page",e)},expression:"listQuery.page"}},t._l(t.pageOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("\n      搜索\n    ")]),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v("\n      新建元素\n    ")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-view"},on:{click:t.handleCapture}},[t._v("\n      元素捕获\n    ")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"ID",prop:"id",sortable:"custom",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",[t._v(t._s(l.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"元素名称","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",{staticClass:"link-type",on:{click:function(e){return t.handleUpdate(l)}}},[t._v(t._s(l.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"定位方式",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-tag",{attrs:{type:t._f("locatorTypeFilter")(l.locator_type)}},[t._v(t._s(l.locator_type))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"定位表达式","min-width":"200px"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("code",[t._v(t._s(l.locator))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"所属页面",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",[t._v(t._s(l.page_name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-tag",{attrs:{type:"valid"===l.status?"success":"danger"}},[t._v("\n          "+t._s("valid"===l.status?"有效":"无效")+"\n        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"最后验证",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",[t._v(t._s(t._f("parseTime")(l.last_validated)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"300","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row,i=e.$index;return[a("div",{staticClass:"button-group"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handleUpdate(l)}}},[t._v("\n            编辑\n          ")]),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.handleValidate(l)}}},[t._v("\n            验证\n          ")]),t._v(" "),a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(e){return t.handleHighlight(l)}}},[t._v("\n            高亮\n          ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(l,i)}}},[t._v("\n            删除\n          ")])],1)]}}])})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"70%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"元素名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入元素名称"},model:{value:t.temp.name,callback:function(e){t.$set(t.temp,"name",e)},expression:"temp.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属页面",prop:"page_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择页面"},model:{value:t.temp.page_id,callback:function(e){t.$set(t.temp,"page_id",e)},expression:"temp.page_id"}},t._l(t.pageOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"定位方式",prop:"locator_type"}},[a("el-select",{on:{change:t.onLocatorTypeChange},model:{value:t.temp.locator_type,callback:function(e){t.$set(t.temp,"locator_type",e)},expression:"temp.locator_type"}},[a("el-option",{attrs:{label:"CSS选择器",value:"css"}}),t._v(" "),a("el-option",{attrs:{label:"XPath",value:"xpath"}}),t._v(" "),a("el-option",{attrs:{label:"ID",value:"id"}}),t._v(" "),a("el-option",{attrs:{label:"Name",value:"name"}}),t._v(" "),a("el-option",{attrs:{label:"Class Name",value:"class"}}),t._v(" "),a("el-option",{attrs:{label:"Tag Name",value:"tag"}}),t._v(" "),a("el-option",{attrs:{label:"Link Text",value:"link_text"}}),t._v(" "),a("el-option",{attrs:{label:"Partial Link Text",value:"partial_link_text"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"定位表达式",prop:"locator"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:t.locatorPlaceholder},model:{value:t.temp.locator,callback:function(e){t.$set(t.temp,"locator",e)},expression:"temp.locator"}}),t._v(" "),a("div",{staticClass:"locator-tips"},[a("small",[t._v(t._s(t.locatorTips))])])],1),t._v(" "),a("el-form-item",{attrs:{label:"元素描述"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入元素描述"},model:{value:t.temp.description,callback:function(e){t.$set(t.temp,"description",e)},expression:"temp.description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"等待策略"}},[a("el-card",{attrs:{shadow:"never"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"等待类型","label-width":"80px"}},[a("el-select",{model:{value:t.temp.wait_strategy.type,callback:function(e){t.$set(t.temp.wait_strategy,"type",e)},expression:"temp.wait_strategy.type"}},[a("el-option",{attrs:{label:"元素可见",value:"visible"}}),t._v(" "),a("el-option",{attrs:{label:"元素存在",value:"present"}}),t._v(" "),a("el-option",{attrs:{label:"元素可点击",value:"clickable"}}),t._v(" "),a("el-option",{attrs:{label:"固定等待",value:"sleep"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"超时时间(s)","label-width":"80px"}},[a("el-input-number",{attrs:{min:1,max:60},model:{value:t.temp.wait_strategy.timeout,callback:function(e){t.$set(t.temp.wait_strategy,"timeout",e)},expression:"temp.wait_strategy.timeout"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"轮询间隔(ms)","label-width":"80px"}},[a("el-input-number",{attrs:{min:100,max:5e3},model:{value:t.temp.wait_strategy.poll_frequency,callback:function(e){t.$set(t.temp.wait_strategy,"poll_frequency",e)},expression:"temp.wait_strategy.poll_frequency"}})],1)],1)],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"验证元素"}},[a("el-button",{attrs:{type:"primary",loading:t.validating},on:{click:t.validateElement}},[a("i",{staticClass:"el-icon-search"}),t._v(" 验证定位\n        ")]),t._v(" "),a("el-button",{attrs:{type:"success",disabled:!t.temp.locator},on:{click:t.highlightElement}},[a("i",{staticClass:"el-icon-view"}),t._v(" 高亮显示\n        ")]),t._v(" "),t.validationResult.message?a("div",{staticClass:"validation-result"},[a("el-alert",{attrs:{title:t.validationResult.message,type:t.validationResult.success?"success":"error",closable:!1,"show-icon":""}})],1):t._e()],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v("确认")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"元素捕获工具",visible:t.captureDialogVisible,width:"60%"},on:{"update:visible":function(e){t.captureDialogVisible=e}}},[a("div",{staticClass:"capture-container"},[a("el-form",{attrs:{model:t.captureForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"目标页面"}},[a("el-input",{attrs:{placeholder:"请输入要捕获元素的页面URL"},model:{value:t.captureForm.url,callback:function(e){t.$set(t.captureForm,"url",e)},expression:"captureForm.url"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"浏览器"}},[a("el-select",{model:{value:t.captureForm.browser,callback:function(e){t.$set(t.captureForm,"browser",e)},expression:"captureForm.browser"}},[a("el-option",{attrs:{label:"Chrome",value:"chrome"}}),t._v(" "),a("el-option",{attrs:{label:"Firefox",value:"firefox"}}),t._v(" "),a("el-option",{attrs:{label:"Safari",value:"safari"}})],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:t.capturing},on:{click:t.startCapture}},[a("i",{staticClass:"el-icon-camera"}),t._v(" 开始捕获\n          ")]),t._v(" "),a("el-button",{attrs:{disabled:!t.capturing},on:{click:t.stopCapture}},[a("i",{staticClass:"el-icon-video-pause"}),t._v(" 停止捕获\n          ")])],1)],1),t._v(" "),t.capturedElements.length>0?a("div",{staticClass:"captured-elements"},[a("h4",[t._v("已捕获的元素")]),t._v(" "),a("el-table",{attrs:{data:t.capturedElements,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"元素名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"locator_type",label:"定位方式",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"locator",label:"定位表达式"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.addCapturedElement(e.row)}}},[t._v("添加")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.removeCapturedElement(e.$index)}}},[t._v("删除")])]}}],null,!1,3532471023)})],1)],1):t._e()],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(r,c,!1,function(t){a("OAcN")},"data-v-4d459783",null);e.default=u.exports},OAcN:function(t,e){},bOdI:function(t,e,a){"use strict";e.__esModule=!0;var l,i=a("C4MV"),s=(l=i)&&l.__esModule?l:{default:l};e.default=function(t,e,a){return e in t?(0,s.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},mClu:function(t,e,a){var l=a("kM2E");l(l.S+l.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})}});
//# sourceMappingURL=5.043e93655f1053f6b1b1.js.map